#  综合案例

## 1 案例项目名称：员工管理系统（EmployeeManagerSystem）

## 2 功能简介

## 2-1 功能：实现对员工的CRUD操作（其中修改除ID以外都可以修改）

## 	2-2 使用集合技术模拟数据库存储10位员工

## 3 Employee类

### 	①Long id：员工编号

### 	②String username：员工账户名（不能重复）

### 	③String password：员工密码

### 	④String realName：员工真实姓名

### 	⑤double salary：员工薪资

### 	⑥String email：员工邮箱地址，由账户名 + @wolfcode.cn组成

### 	⑦Long deptNo：部门编号

## 4 数据

```java
new Employee(1L,"liuBei","liuBei666","刘备",8754.36,"liuBei@wolfcode.cn",1L);
new Employee(2L,"caoCao","caoCao000","曹操",9630.25,"caoCao@wolfcode.cn",2L);
new Employee(3L,"sunQuan","sunQuan777","孙权",7777.36,"sunQuan@wolfcode.cn",3L);
new Employee(4L,"guanYu","guanYu666","关羽",6543.21,"guanYu@wolfcode.cn",1L);
new Employee(5L,"zhaoYun","zhaoYun999","赵云",8888.88,"zhaoYun@wolfcode.cn",1L);
new Employee(6L,"sunShangXiang","sunShangXiang555","孙尚香",6666.66,"sunShangXiang@wolfcode.cn",1L);
new Employee(7L,"dianWei","dianWei123","典韦",9456.33,"dianWei@wolfcode.cn",2L);
new Employee(8L,"xuChu","xuChu456","许褚",9000,"xuChu@wolfcode.cn",2L);
new Employee(9L,"zhouYu","zhouYu857","周瑜",7410,"zhouYu@wolfcode.cn",3L);
new Employee(10L,"xiaoQiao","xiaoQiao741","小乔",9999.63,"xiaoQiao@wolfcode.cn",3L);
```

# ===================================

# ①按照JavaBean定义规范创建员工实体类Employee

![image-20240712230606390](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240712230606390.png)

#### 设置员工们的属性

```java
private Long id;
private String username;
private String password;
private String realName;
private double salary;
private String email;
private Long deptNo;
public static final String SUFFIX ="@wolfcode.cn";
//定义了一个名为 SUFFIX 的常量，它的值为 "@wolfcode.cn"。
//当需要在代码中使用这个后缀时，可以直接引用 SUFFIX，而不需要每次都输入 "@wolfcode.cn"。
//同时，如果以后需要修改后缀，只需要修改这一行代码即可。
```

#### 创建有参构造器、无参构造器（这里有问题的话，后期还会有改动）

```java
public Employee() {
}

//添加员工，其中邮箱并不需要上传所以把邮箱参数删掉，邮箱的本类 = 用户名+固定的后缀
public Employee(Long id, String username, String password, String realName, double salary, Long deptNo) {
    this.id = id;
    this.username = username;
    this.password = password;
    this.realName = realName;
    this.salary = salary;
    this.email = username + SUFFIX;//username + SUFFIX;//姓名+指定的后缀
    this.deptNo = deptNo;
}
```

#### 创建GetSet方法

```java
public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getRealName() {
        return realName;
    }

    public void setRealName(String realName) {
        this.realName = realName;
    }

    public double getSalary() {
        return salary;
    }

    public void setSalary(double salary) {
        this.salary = salary;
    }

    public String getEmail() {
        return email;
    }

    //其中email的set方法，设置邮箱的时候上传 用户名+固定后缀 就可以
    public void setEmail(String email) {
        this.email = username + SUFFIX;
    }

    public Long getDeptNo() {
        return deptNo;
    }

    public void setDeptNo(Long deptNo) {
        this.deptNo = deptNo;
    }
}
```

#### 创建toString方法

```java
@Override
public String toString() {
    return "Employee{" +
            "id=" + id +
            ", username='" + username + '\'' +
            ", password='" + password + '\'' +
            ", realName='" + realName + '\'' +
            ", salary=" + salary +
            ", email='" + email + '\'' +
            ", deptNo=" + deptNo +
            '}';
}
```



# ②模拟前端页面操作 — 页面菜单MenuUI

![image-20240712233328792](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240712233328792.png)

#### 操作选项

```java
public class MenuUI {
    //公共的静态方法，没有返回值（void），也没有参数。这个方法目前是空的，没有任何实现。
    public static void menu(){
        System.out.println("============================");
        System.out.println("=========1、添加员工===========");
        System.out.println("=========2、删除员工===========");
        System.out.println("=========3、修改员工===========");
        System.out.println("=========4、查询员工===========");
        System.out.println("=========0、退出系统===========");
        System.out.println("=============================");
    }
}
```



# ③员工业务类EmployeeService

![image-20240712234418390](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240712234418390.png)

#### 定义集合存储已存在的员工信息

```java
public class EmployeeService {
    //                  这个对象只需要实例化一次👇
    private static ArrayList<Employee> employees;
    //     👆后定义，在静态的代码块中调用此成员，所以是静态的
    /*分析：
     * 1、员工信息只需要存储一次即可
     * 2、需要在程序运行操作前，加载好
     * 所以使用static代码块 - 只加载一次并且优先加载
     * */
    static {
        //实例化集合对象
        //在静态代码块中去调用类成员,楼上的集合就也要变成静态的
        employees = new ArrayList<>();
        employees.add(new Employee(1L, "liuBei", "liuBei666", "刘备", 8754.36, "liuBei@wolfcode.cn", 1L));
        employees.add(new Employee(2L, "caoCao", "caoCao000", "曹操", 9630.25, "caoCao@wolfcode.cn", 2L));
        employees.add(new Employee(3L, "sunQuan", "sunQuan777", "孙权", 7777.36, "sunQuan@wolfcode.cn", 3L));
        employees.add(new Employee(4L, "guanYu", "guanYu666", "关羽", 6543.21, "guanYu@wolfcode.cn", 1L));
        employees.add(new Employee(5L, "zhaoYun", "zhaoYun999", "赵云", 8888.88, "zhaoYun@wolfcode.cn", 1L));
        employees.add(new Employee(6L, "sunShangXiang", "sunShangXiang555", "孙尚香", 6666.66, "sunShangXiang@wolfcode.cn", 1L));
        employees.add(new Employee(7L, "dianWei", "dianWei123", "典韦", 9456.33, "dianWei@wolfcode.cn", 2L));
        employees.add(new Employee(8L, "xuChu", "xuChu456", "许褚", 9000, "xuChu@wolfcode.cn", 2L));
        employees.add(new Employee(9L, "zhouYu", "zhouYu857", "周瑜", 7410, "zhouYu@wolfcode.cn", 3L));
        employees.add(new Employee(10L, "xiaoQiao", "xiaoQiao741", "小乔", 9999.63, "xiaoQiao@wolfcode.cn", 3L));
    }
}
```

#### 此时会出现报错，在员工类里没有邮箱属性，但是在业务类中既要显示编号还要显示邮箱，所以要在员工类中增加一个显示员工的构造器，用于重载/显示当前员工的信息

```java
//用于显示员工
public Employee(Long id, String username, String password, String realName,String email, double salary, Long deptNo) {
    //部门和邮箱的顺序不要错
    this.id = id;
    this.username = username;
    this.password = password;
    this.realName = realName;
    this.salary = salary;
    this.email = email;//email属性添加，这里也添加
    this.deptNo = deptNo;
}
//需要用的时候再去添加构造器
```

#### 所有的数据都需键盘录入

```java
public class EmployeeService {
    private static ArrayList<Employee> employees;
    //定义键盘录入工具
    private static Scanner sc;
    static {
        //同时在静态代码块中也去创建,实例化Scanner对象
        sc = new Scanner(System.in);
        employees = new ArrayList<>();
        employees.add(new Employee(1L, "liuBei", "liuBei666", "刘备", 8754.36, "liuBei@wolfcode.cn", 1L));
        employees.add(new Employee(2L, "caoCao", "caoCao000", "曹操", 9630.25, "caoCao@wolfcode.cn", 2L));
        employees.add(new Employee(3L, "sunQuan", "sunQuan777", "孙权", 7777.36, "sunQuan@wolfcode.cn", 3L));
        employees.add(new Employee(4L, "guanYu", "guanYu666", "关羽", 6543.21, "guanYu@wolfcode.cn", 1L));
        employees.add(new Employee(5L, "zhaoYun", "zhaoYun999", "赵云", 8888.88, "zhaoYun@wolfcode.cn", 1L));
        employees.add(new Employee(6L, "sunShangXiang", "sunShangXiang555", "孙尚香", 6666.66, "sunShangXiang@wolfcode.cn", 1L));
        employees.add(new Employee(7L, "dianWei", "dianWei123", "典韦", 9456.33, "dianWei@wolfcode.cn", 2L));
        employees.add(new Employee(8L, "xuChu", "xuChu456", "许褚", 9000, "xuChu@wolfcode.cn", 2L));
        employees.add(new Employee(9L, "zhouYu", "zhouYu857", "周瑜", 7410, "zhouYu@wolfcode.cn", 3L));
        employees.add(new Employee(10L, "xiaoQiao", "xiaoQiao741", "小乔", 9999.63, "xiaoQiao@wolfcode.cn", 3L));
    }
}
```

#### 创建主页的操作—系统当前的时间

```java
//主页方法
public void homePage(){
    System.out.println("======================");
    System.out.println("===="+new Date()+"====");
    System.out.println("======================");
}
```

# ④员工测试类EmployeeTest（测试 系统时间）

![image-20240713002131789](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240713002131789.png)

```java
package cn.wolfcode.test;
/*
 * 测试类
 * */
import cn.wolfcode.Service.EmployeeService;

public class EmployeeTest {
    public static void main(String[] args) {
        EmployeeService es = new EmployeeService();
        es.homePage();
        //创建了一个名为es的EmployeeService对象，并调用了它的homePage()方法。
    }
}
```

![image-20240713091759506](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240713091759506.png)

#### 测试之后结果发现并不理想，可以设置日期格式，所以我们创建一个时间格式工具类

# ⑤TimeFormatUtils



![image-20240713092022158](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240713092022158.png)

#### 无参构造器失效方式两种

1、private 私有化 — 定义私有的无参构造器

2、抽象类接口 — 有无参构造器但没办法实例化对象

```java
package cn.wolfcode.util;

import java.text.SimpleDateFormat;
import java.util.Date;//util包下的
/*
 * 自定义工具类规范
 *   1、类名
 *       1）类名是utils结尾，表示当前是工具类
 *       2）前缀表示当前工具类进行什么样的操作
 *   2、工具类的成员一般都是被static修饰的
 *   3、工具类定义为抽象类和接口
 * */
//如果类中没有明确定义构造器，那么JVM虚拟机会提供一个默认的无参构造器
public abstract class TimeFormatUtils {
//     👆抽象，让它没办法实例化对象
    public static String timeFormat(){
        //   👆 该方法属于类本身，而不是类的实例！！！！！！！！！！
        //不需要创建DateUtils的实例。简化代码只依赖于系统时间，而不依赖于任何特定对象的状态
        Date date  = new Date();
        //创建一个 Date 对象，表示当前时间。
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss aa EE");
        // 创建一个 SimpleDateFormat 对象，用于将日期格式化为指定的格式。
        return sdf.format(date);
        //使用 SimpleDateFormat 对象的 format 方法将 Date 对象转换为指定格式的字符串，并返回该字符串。
    }
}
```

#### 员工测试类解释

```java
package cn.wolfcode.test;

import cn.wolfcode.Service.EmployeeService;

public class EmployeeTest {
    public static void main(String[] args) {
        EmployeeService es = new EmployeeService();
        es.homePage();
        //通过自定义工具类的抽象，来让构造器失效，让它不能new对象出现默认无参构造器
        //TimeFormatUtils tfu = new TimeFormatUtils();
        //   tfu.timeFormat();  这么定义的话，设置static就失效了
        //如果new的话，TimeFormatUtils类的static就没有意义了
        //所以就只能类名.调用
    }
}
```

#### 员工业务类—主页方法改成时间类的时间格式

```java
//主页方法
public void homePage(){
    System.out.println("====================================");
    System.out.println("===="+ TimeFormatUtils.timeFormat()+"====");
    System.out.println("====================================");
}
```

#### 测试结果

![image-20240713101106948](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240713101106948.png)

## 主方法完成，接下来进行首页操作

#### 调用菜单

```java
    public void homePage() {
        System.out.println("====================================");
        System.out.println("====" + TimeFormatUtils.timeFormat() + "====");
        System.out.println("====================================");
        System.out.println("❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀");
        a:
        while (true) {
            //调用菜单
            MenuUI.menu();
            System.out.print("请选择你要执行的操作：");
            int choose = sc.nextInt();
            //判断条件：等值 && 类型int && 值的个数较少 =>switch语句
            switch (choose) {
                case 1:
                    //添加方法
                    break;
                case 2:
                    //删除方法
                    break;
                case 3:
                    //修改方法
                    break;
                case 4:
                    //查询方法
                    break;
                case 0:
                    sc.close();//关闭资源
                    System.out.println("欢迎下次光临！");
                    break a;//关闭别名为a的循环(while)，不然循环了
            }
        }
    }
```

![image-20240713104622756](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240713104622756.png)

#### 1、添加方法—其中员工账户名不能重复

```java
case 1:
    //添加方法
    add();
    break;
```

```java
//添加员工-员工的账户名不能重复
    public void add() {
        //加while循环判断，格式结构写全再把内容加进去
        while (true) {   //这是存在账户
            System.out.print("请输入员工账户：");
            String username = sc.next();
            //调用判断指定的账户名是否存在
            if (usernameIsExists(username)) {
                System.out.println("账户名已存在，请重新输入");
            } else {       //否则就不存在，不存在就可录入新员工了！
                // 密码、真实名字、薪资还有部门等，但是不能录入邮箱
                System.out.print("请输入员工的密码:");
                String password = sc.next();
                System.out.print("请输入员工的真实姓名：");
                String realName = sc.next();
                System.out.print("请输入员工的薪资：");
                double salary = sc.nextDouble();
                System.out.print("请输入员工的部门编号：");
                Long deptNo = sc.nextLong();
                //调用获取已存在最后一个员工的id属性值的方法
                long id = getId();
                //将用户输入的员工信息封装到指定类的对象中
                //三个构造器用的是-实体类中添加员工的构造器
                Employee emp = new Employee(++id, username, password, realName, salary, deptNo);
                //将封装好的员工存储到集合中
                employees.add(emp);
                System.out.println("添加成功!!!");
                //查询方法,查询所有员工的信息-添加之后可以打印一下
                showAll(employees);
                break;
            }
        }
    }
```

#### 查询方法

```java
case 4:
    //查询方法
    showAll(employees);
    break;
```

#### ----方法----

```java
//判断指定的账户名是否存在
public boolean usernameIsExists(String username) {
    //遍历集合，获取每一个员工对象 => 增强for循环
    for (Employee emp : employees) {
        //通过获取的员工对象调用方法，与参数判断是否一致
        if (emp.getUsername().equals(username)) {
            //表示账户名已存在
            return true;
        }
    }
    //表示账户不存在
    return false;
}
```

```java
//调用获取已存在最后一个员工的id属性值的方法
private long getId() {
    return employees.get(employees.size()-1).getId();
}
```

```java
//查询所有员工的信息
private void showAll(ArrayList<Employee> employees) {
    for (Employee emp : employees) {
        //Java中的一个for-each循环，用于遍历名为employees的Employee对象集合。
        // 在每次迭代中，它会取出一个Employee对象（命名为emp），
        // 然后调用该对象的toString()方法，并将结果输出到控制台。
        System.out.println(emp.toString());
    }
}
```

![image-20240713113212792](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240713113212792.png)

![image-20240713113224571](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240713113224571.png)

#### 2、删除方法

```java
case 2:
    //删除方法
    delete();
    break;
```

```java
//删除员工
public void delete() {
    System.out.print("请输入你要删除员工的ID:");
    Long id = sc.nextLong();
    //调用根据id查询员工信息
    Employee employee = selOneById(id);
    //根据查询到的员工对象判断
    if (employee == null) {
        System.out.println("查无此人，删除失败了");
    } else {
        //通过集合对象调用方法移除元素
        employees.remove(employee);
        System.out.println("bibi:此人已成功删除~~~,重新展示员工信息");
        showAll(employees);
    }
}
```

#### ----方法----

```java
//调用根据id查询员工信息
public Employee selOneById(Long id) {
    //遍历集合，获取每一个员工对象 => 增强for循环
    for (Employee emp : employees) {
        //通过获取的员工对象调用方法，与参数判断是否一致
        if (emp.getId() == id) {
            //表示员工已存在
            return emp;  //for循环里
        }
    }
    //表示账户不存在
    return null;//for循环外
}
```

![image-20240713114354340](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240713114354340.png)

#### 3、修改方法

```java
case 3:
    //修改方法
    edit();
    break;
```

#### ----方法----

```java
//编辑员工信息(除ID以外)
public void edit() {
    System.out.print("请输入你要编辑员工的ID：");
    Long id = sc.nextLong();
    //调用根据id查询员工信息方法
    Employee employee = selOneById(id);
    //根据查询到的员工对象判断
    if (employee == null) {
        System.out.println("查无此人，编辑失败了");
    } else {
        System.out.println("编辑前：" + employee.toString());
        //加while循环判断，格式结构写全再把内容加进去
        while (true) {   //这是存在账户
            System.out.print("请输入员工账户：");
            String username = sc.next();
            //调用判断指定的账户名是否存在
            if (usernameIsExists(username)) {
                System.out.println("账户名已存在，请重新输入");
            } else {       //否则就不存在，不存在就可录入新员工了！
                // 密码、真实名字、薪资还有部门等，但是不能录入邮箱
                //和添加员工的逻辑相同，细节修改
                employee.setUsername(username);//不重复的时候，直接就能录入进来
                System.out.print("请输入员工的密码:");
                employee.setPassword(sc.next());
                System.out.print("请输入员工的真实姓名：");
                employee.setRealName(sc.next());
                System.out.print("请输入员工的薪资：");
                employee.setSalary(sc.nextDouble());

                employee.setEmail(username);//将变量username的值设置为employee对象的电子邮件属性。

                System.out.print("请输入员工的部门编号：");
                employee.setDeptNo(sc.nextLong());
                //获取当前元素所在的位置
                int index = (int) (id - 1);//id本是Long类型需要去强转
                //通过集合对象调用方法，给指定位置设置元素
                /*
                * 用于将一个名为employee的对象替换到名为employees的列表中的
                * 指定索引位置。这里的index是一个整数，表示要替换的位置
                * */
                employees.set(index, employee);
                System.out.println("编辑成功!!!");
                System.out.println(employee.toString());//编辑的员工信息打印出来
                break;
            }
        }
    }
}
```

![image-20240713133904836](E:\JAVA58\模拟项目\StaffManageSystem\StaffManageSystem_img\image-20240713133904836.png)



# =====================================

## 根据需求完成对员工管理系统的升级

## 1 重新定义员工类，新增int admin字段，并设置默认值为1，表示普通账户，0管理员账户，修改原始数据刘备、曹操、孙权admin字段值为0，其他都是1

## 2 添加登录操作方法，根据账户、密码和随机验证码进行登录校验，登录成功后根据账户的admin值进行判断，如果为1，可以进行所有操作，否则只能进行查询所有操作和显示当前自己信息

