![image-20240710202857839](img/image-20240710202857839.png)

## Employee

```java
package cn.wolfcode.domain;
/*
* 实体类：按照javaBean定义规范创建Employee类
* */
public class Employee {
    //员工编号
    private Long id;
    //员工账户
    private String username;
    //员工密码
    private String password;
    //真实姓名
    private String realName;
    //员工薪资
    private double salary;
    //邮箱地址
    private String email;
    //部门编号
    private Long deptNo;
    //常量：邮箱固定后缀
    public static final String SUFFIX = "@wolfcode.cn";

    public Employee(){}

    //用于添加员工,但是没有邮箱，在实例化中既要显示编号又要显示邮箱
    public Employee(Long id, String username, String password, String realName,
                    double salary,Long deptNo) {
        this.id = id;
        this.username = username;
        this.password = password;
        this.realName = realName;
        this.salary = salary;
        this.email = username + SUFFIX;//在员工业务类中显示员工信息
                //username + SUFFIX;//姓名+指定的后缀 ，（）里的email就不要了
        this.deptNo = deptNo;
    }

    //用于显示员工
    public Employee(Long id, String username, String password, String realName,
                    double salary, String email,Long deptNo) {
        this.id = id;
        this.username = username;
        this.password = password;
        this.realName = realName;
        this.salary = salary;
        this.email = email;//在员工业务类中显示员工信息
        this.deptNo = deptNo;
    }


    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getRealName() {
        return realName;
    }

    public void setRealName(String realName) {
        this.realName = realName;
    }

    public double getSalary() {
        return salary;
    }

    public void setSalary(double salary) {
        this.salary = salary;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String username) { this.email = username+ SUFFIX;}
    //                            👆                       👆同样修改
    public Long getDeptNo() {
        return deptNo;
    }

    public void setDeptNo(Long deptNo) {
        this.deptNo = deptNo;
    }

    //重写toString的方法
    @Override
    public String toString() {
        return "Employee{" +
                "id=" + id +
                ", username='" + username + '\'' +
                ", password='" + password + '\'' +
                ", realName='" + realName + '\'' +
                ", salary=" + salary +
                ", email='" + email + '\'' +
                ", deptNo=" + deptNo +
                '}';
    }
}
```

## MenuUI

```java
package cn.wolfcode.Ui;
/*
* 菜单：定义模拟前端页面操作
* */

public class MenuUI {
    public static void menu(){
        System.out.println("============================");
        System.out.println("=========1、添加员工===========");
        System.out.println("=========2、删除员工===========");
        System.out.println("=========3、修改员工===========");
        System.out.println("=========4、查询员工===========");
        System.out.println("=========0、退出系统===========");
        System.out.println("============================");
    }
}
```

## TimeFormatUtils

```java
package cn.wolfcode.util;

import java.text.SimpleDateFormat;
import java.util.Date;

/*
* 自定义工具类规范
*   1、类名
*       1）类名是utils结尾，表示当前是工具类
*       2）前缀表示当前工具类进行什么样的操作
*   2、工具类的成员一般都是被static修饰的
*   3、工具类定义为抽象类和接口
* */

public abstract class TimeFormatUtils {
//     👆抽象，让它没办法实例化对象

    public static String timeFormat(){
        Date date  = new Date();
        //获取当前时间
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss aa EE");
        return sdf.format(date);
    }
}
```

## EmployeeService

```java
package cn.wolfcode.Service;

import cn.wolfcode.Ui.MenuUI;
import cn.wolfcode.domain.Employee;
import cn.wolfcode.util.TimeFormatUtils;

import java.util.ArrayList;
import java.util.Scanner;

/*
 *员工的业务类：增删改查
 * */
public class EmployeeService {
    //定义集合存储已存在的员工信息
    private static ArrayList<Employee> employees;
    //     👆后定义，在静态的代码块中调用此成员，所以是静态的
    //定义键盘录入工具
    private static Scanner sc;

    /*分析：
     * 1、员工信息只需要存储一次即可
     * 2、需要在程序运行操作前，加载好
     * 所以使用static代码块
     * */
    static {
        //实例化Scanner类对象
        sc = new Scanner(System.in);
        //实例化集合对象
        employees = new ArrayList<>();
        //通过集合对象调用方法将指定的员工信息对象存储到集合中
        /*
         * 刚开始会报错(有参构造)，没有一个构造器去处理这个东西（resolve constructor）
         * */
        employees.add(new Employee(1L, "liuBei", "liuBei666", "刘备", 8754.36, "liuBei@wolfcode.cn", 1L));
        employees.add(new Employee(2L, "caoCao", "caoCao000", "曹操", 9630.25, "caoCao@wolfcode.cn", 2L));
        employees.add(new Employee(3L, "sunQuan", "sunQuan777", "孙权", 7777.36, "sunQuan@wolfcode.cn", 3L));
        employees.add(new Employee(4L, "guanYu", "guanYu666", "关羽", 6543.21, "guanYu@wolfcode.cn", 1L));
        employees.add(new Employee(5L, "zhaoYun", "zhaoYun999", "赵云", 8888.88, "zhaoYun@wolfcode.cn", 1L));
        employees.add(new Employee(6L, "sunShangXiang", "sunShangXiang555", "孙尚香", 6666.66, "sunShangXiang@wolfcode.cn", 1L));
        employees.add(new Employee(7L, "dianWei", "dianWei123", "典韦", 9456.33, "dianWei@wolfcode.cn", 2L));
        employees.add(new Employee(8L, "xuChu", "xuChu456", "许褚", 9000, "xuChu@wolfcode.cn", 2L));
        employees.add(new Employee(9L, "zhouYu", "zhouYu857", "周瑜", 7410, "zhouYu@wolfcode.cn", 3L));
        employees.add(new Employee(10L, "xiaoQiao", "xiaoQiao741", "小乔", 9999.63, "xiaoQiao@wolfcode.cn", 3L));
    }

    //主页方法
    public void homePage() {
        System.out.println("❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀");
        System.out.println(">>" + TimeFormatUtils.timeFormat() + "<<");
        System.out.println("❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀❀");
        a:
        while (true) {
            //调用菜单
            MenuUI.menu();
            System.out.print("请选择你要执行的操作：");
            int choose = sc.nextInt();
            //判断条件：等值 && 类型int && 值的个数较少 =>switch语句
            switch (choose) {
                case 1:
                    //添加方法
                    add();
                    break;
                case 2:
                    //删除方法
                    delete();
                    break;
                case 3:
                    //修改方法
                    edit();
                    break;
                case 4:
                    //查询方法
                    showAll(employees);
                    break;
                case 0:
                    sc.close();//关闭资源
                    System.out.println("感谢相遇,欢迎下次光临！");
                    break a;//关闭别名为a的循环(while)，不然循环了
            }
        }
    }

    //编辑员工信息(除ID以外)
    public void edit() {
        System.out.print("请输入你要编辑员工的ID：");
        Long id = sc.nextLong();
        //调用根据id查询员工信息方法
        Employee employee = selOneById(id);
        //根据查询到的员工对象判断
        if (employee == null) {
            System.out.println("查无此人，编辑失败了");
        } else {
            System.out.println("编辑前：" + employee.toString());
            //加while循环判断，格式结构写全再把内容加进去
            while (true) {   //这是存在账户
                System.out.print("请输入员工账户：");
                String username = sc.next();
                //调用判断指定的账户名是否存在
                if (usernameIsExists(username)) {
                    System.out.println("账户名已存在，请重新输入");
                } else {       //否则就不存在，不存在就可录入新员工了！
                    // 密码、真实名字、薪资还有部门等，但是不能录入邮箱
                    employee.setUsername(username);//不重复的时候，直接就能录入进来
                    System.out.print("请输入员工的密码:");
                    employee.setPassword(sc.next());
                    System.out.print("请输入员工的真实姓名：");
                    employee.setRealName(sc.next());
                    System.out.print("请输入员工的薪资：");
                    employee.setSalary(sc.nextDouble());
                    employee.setEmail(username);//将变量username的值设置为employee对象的电子邮件属性。
                    System.out.print("请输入员工的部门编号：");
                    employee.setDeptNo(sc.nextLong());
                    //获取当前元素所在的位置
                    int index = (int) (id - 1);//id本是Long类型需要去强转
                    //通过集合对象调用方法，给指定位置设置元素
                    employees.set(index, employee);
                    System.out.println("编辑成功!!!");
                    System.out.println(employee.toString());//编辑的员工信息打印出来
                    break;
                }
            }
        }
    }

    //删除员工
    public void delete() {
        System.out.print("请输入你要删除员工的ID:");
        Long id = sc.nextLong();
        //调用根据id查询员工信息
        Employee employee = selOneById(id);
        //根据查询到的员工对象判断
        if (employee == null) {
            System.out.println("查无此人，删除失败了");
        } else {
            //通过集合对象调用方法移除元素
            employees.remove(employee);
            System.out.println("bibi:此人已成功删除~~~");
            showAll(employees);
        }
    }

    //调用根据id查询员工信息
    public Employee selOneById(Long id) {
        //遍历集合，获取每一个员工对象 => 增强for循环
        for (Employee emp : employees) {
            //通过获取的员工对象调用方法，与参数判断是否一致
            if (emp.getId() == id) {
                //表示员工已存在
                return emp;  //for循环里
            }
        }
        //表示账户不存在
        return null;//for循环外
    }

    //查询所有
    public void showAll(ArrayList<Employee> employees) {
        /*
         * public表示这个方法可以被任何其他类访问。
         * void表示这个方法没有返回值。
         * showAll是方法的名称。
         * ArrayList<Employee> employees是方法的参数，
         * 它是一个包含Employee对象的ArrayList
         * */
        for (Employee emp : employees) {
            /*遍历employees列表中的每个元素。每次迭代时，当前元素被赋值给变量emp*/
            System.out.println(emp.toString());
            /*假设Employee类已经重写了toString()方法，以便输出员工的详细信息。*/
        }
    }

    //添加员工-员工的账户名不能重复
    public void add() {
        //加while循环判断，格式结构写全再把内容加进去
        while (true) {   //这是存在账户
            System.out.print("请输入员工账户：");
            String username = sc.next();
            //调用判断指定的账户名是否存在
            if (usernameIsExists(username)) {
                System.out.println("账户名已存在，请重新输入");
            } else {       //否则就不存在，不存在就可录入新员工了！
                // 密码、真实名字、薪资还有部门等，但是不能录入邮箱
                System.out.print("请输入员工的密码:");
                String password = sc.next();
                System.out.print("请输入员工的真实姓名：");
                String realName = sc.next();
                System.out.print("请输入员工的薪资：");
                double salary = sc.nextDouble();
                System.out.print("请输入员工的部门编号：");
                Long deptNo = sc.nextLong();
                //调用获取已存在最后一个员工的id属性值的方法
                long id = getId();
                //将用户输入的员工信息封装到指定类的对象中
                //三个构造器用的是-实体类中添加员工的构造器
                Employee emp = new Employee(++id, username, password, realName, salary, deptNo);
                //将封装好的员工存储到集合中
                employees.add(emp);
                System.out.println("添加成功!!!");
                //查询方法-添加之后可以打印一下
                showAll(employees);
                break;
            }
        }
    }

    public long getId() {
        return employees.get(employees.size() - 1).getId();
        /*
         * 获取一个员工列表（employees）中最后一个员工的ID。
         * 具体来说，它首先获取员工列表的大小（employees.size()），
         * 然后减去1以得到最后一个元素的索引（因为索引是从0开始的）。
         * 接着，它使用employees.get(index)方法获取该索引对应的
         * 员工对象，并调用该对象的getId()方法来获取员工的ID。
         * 最后，该方法返回这个ID值
         * */
    }

    //判断指定的账户名是否存在
    public boolean usernameIsExists(String username) {
        //遍历集合，获取每一个员工对象 => 增强for循环
        for (Employee emp : employees) {
            //通过获取的员工对象调用方法，与参数判断是否一致
            if (emp.getUsername().equals(username)) {
                //表示账户名已存在
                return true;  //for循环里
            }
        }
        //表示账户不存在
        return false;//for循环外
    }
}
```

## EmployeeTest

```java
package cn.wolfcode.test;

import cn.wolfcode.Service.EmployeeService;
/*
* 测试类
* */

public class EmployeeTest {
    public static void main(String[] args) {
        EmployeeService es = new EmployeeService();
        es.homePage();
        //通过自定义工具类的抽象，来让构造器失效，让它不能new关键字 new对象
        //所以就只能类名.调用
    }
}
```

